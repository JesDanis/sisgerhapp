{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jesda/Desktop/sisgerhapp/sisgerhapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport * as CryptoJS from 'crypto-js';\nlet MenuComponent = class MenuComponent {\n  constructor(sisgerhService, domSanitizer, authService, router) {\n    this.sisgerhService = sisgerhService;\n    this.domSanitizer = domSanitizer;\n    this.authService = authService;\n    this.router = router;\n    this.sidebarShow = true;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      localStorage.setItem('usuario', 'dcadme');\n      let inUser = localStorage.getItem('usuario');\n\n      if (inUser) {\n        let response;\n        response = yield _this.sisgerhService.obtenerSesion(btoa(inUser)).toPromise();\n\n        if (response[0].DMPER_CODIGO != undefined) {\n          _this.sesion = [''];\n          _this.sesion = response;\n          _this.sesion = _this.sesion[0]; //Obtener DMPER_CODIGO\n\n          _this.color = _this.sesion.COLOR_ESCALA;\n          _this.num_rol = _this.sesion.DMPER_NUMERO_ROL;\n          _this.empleado = _this.sesion.DMPER_NOMBRE_EMPLEADO;\n          _this.cuenta = _this.sesion.DSGUS_CUENTA;\n          _this.inPerson = _this.sesion.DMPER_CODIGO;\n          _this.inPerson = CryptoJS.AES.encrypt(_this.inPerson.toString(), 'eeasaPer');\n          _this.user = CryptoJS.AES.encrypt(inUser, 'eeasaPer');\n\n          _this.authService.login(_this.inPerson, _this.user); //Cargar fotogafria\n\n\n          _this.fotografia = _this.sesion.DMPER_FOTOGRAFIA;\n          let TYPED_ARRAY = new Uint8Array(_this.fotografia);\n          const STRING_CHAR = TYPED_ARRAY.reduce((data, byte) => {\n            return data + String.fromCharCode(byte);\n          }, '');\n          let base64String = btoa(STRING_CHAR);\n          _this.imageUrl = _this.domSanitizer.bypassSecurityTrustUrl('data:image/png;base64, ' + base64String);\n\n          _this.sisgerhService.obtenerPerfil(inUser).subscribe(res => {\n            // this.router.routeReuseStrategy.shouldReuseRoute = () => false;\n            // this.router.onSameUrlNavigation\n            // this.router.onSameUrlNavigation = 'reload';\n            // this.router.navigate([currentUrl]);\n            _this.router.navigate(['/index']);\n\n            if (res[0].respuesta == 'SI') {\n              jQuery(\"#menuAdmin\").css(\"visibility\", \"visible\");\n            } else {\n              jQuery(\"#menuAdmin\").css(\"visibility\", \"hidden\");\n            }\n          });\n        }\n      } else {\n        _this.salir();\n\n        window.location.href = 'http://172.20.0.84:7001/intranet#/';\n      }\n    })();\n  }\n\n  sidebar() {\n    //   $('#menu-toggle').on('click', function() {\n    //     $('#wrapper').toggleClass('toggled');\n    // });\n    // console.log('siii')\n    if (this.sidebarShow) {\n      jQuery('.largeTable').width('96vw');\n      this.sidebarShow = false;\n    } else {\n      jQuery('.largeTable').width('80vw');\n      this.sidebarShow = true;\n    }\n  }\n\n  salir() {\n    this.authService.logout(); //window.location.href = 'https://app.eeasa.com.ec/intranet#/';\n\n    window.location.href = 'http://172.20.0.84:7001/intranet#/';\n  }\n\n};\nMenuComponent = __decorate([Component({\n  selector: 'app-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.css']\n})], MenuComponent);\nexport { MenuComponent };","map":{"version":3,"sources":["C:/Users/jesda/Desktop/sisgerhapp/sisgerhapp/src/app/components/menu/menu.component.ts"],"names":["__decorate","Component","CryptoJS","MenuComponent","constructor","sisgerhService","domSanitizer","authService","router","sidebarShow","ngOnInit","localStorage","setItem","inUser","getItem","response","obtenerSesion","btoa","toPromise","DMPER_CODIGO","undefined","sesion","color","COLOR_ESCALA","num_rol","DMPER_NUMERO_ROL","empleado","DMPER_NOMBRE_EMPLEADO","cuenta","DSGUS_CUENTA","inPerson","AES","encrypt","toString","user","login","fotografia","DMPER_FOTOGRAFIA","TYPED_ARRAY","Uint8Array","STRING_CHAR","reduce","data","byte","String","fromCharCode","base64String","imageUrl","bypassSecurityTrustUrl","obtenerPerfil","subscribe","res","navigate","respuesta","jQuery","css","salir","window","location","href","sidebar","width","logout","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from \"@angular/core\";\r\nimport * as CryptoJS from 'crypto-js';\r\nlet MenuComponent = class MenuComponent {\r\n    constructor(sisgerhService, domSanitizer, authService, router) {\r\n        this.sisgerhService = sisgerhService;\r\n        this.domSanitizer = domSanitizer;\r\n        this.authService = authService;\r\n        this.router = router;\r\n        this.sidebarShow = true;\r\n    }\r\n    async ngOnInit() {\r\n        localStorage.setItem('usuario', 'dcadme');\r\n        let inUser = localStorage.getItem('usuario');\r\n        if (inUser) {\r\n            let response;\r\n            response = await this.sisgerhService.obtenerSesion(btoa(inUser)).toPromise();\r\n            if (response[0].DMPER_CODIGO != undefined) {\r\n                this.sesion = [''];\r\n                this.sesion = response;\r\n                this.sesion = this.sesion[0];\r\n                //Obtener DMPER_CODIGO\r\n                this.color = this.sesion.COLOR_ESCALA;\r\n                this.num_rol = this.sesion.DMPER_NUMERO_ROL;\r\n                this.empleado = this.sesion.DMPER_NOMBRE_EMPLEADO;\r\n                this.cuenta = this.sesion.DSGUS_CUENTA;\r\n                this.inPerson = this.sesion.DMPER_CODIGO;\r\n                this.inPerson = CryptoJS.AES.encrypt(this.inPerson.toString(), 'eeasaPer');\r\n                this.user = CryptoJS.AES.encrypt(inUser, 'eeasaPer');\r\n                this.authService.login(this.inPerson, this.user);\r\n                //Cargar fotogafria\r\n                this.fotografia = this.sesion.DMPER_FOTOGRAFIA;\r\n                let TYPED_ARRAY = new Uint8Array(this.fotografia);\r\n                const STRING_CHAR = TYPED_ARRAY.reduce((data, byte) => {\r\n                    return data + String.fromCharCode(byte);\r\n                }, '');\r\n                let base64String = btoa(STRING_CHAR);\r\n                this.imageUrl = this.domSanitizer.bypassSecurityTrustUrl('data:image/png;base64, ' + base64String);\r\n                this.sisgerhService.obtenerPerfil(inUser).subscribe((res) => {\r\n                    // this.router.routeReuseStrategy.shouldReuseRoute = () => false;\r\n                    // this.router.onSameUrlNavigation\r\n                    // this.router.onSameUrlNavigation = 'reload';\r\n                    // this.router.navigate([currentUrl]);\r\n                    this.router.navigate(['/index']);\r\n                    if (res[0].respuesta == 'SI') {\r\n                        jQuery(\"#menuAdmin\").css(\"visibility\", \"visible\");\r\n                    }\r\n                    else {\r\n                        jQuery(\"#menuAdmin\").css(\"visibility\", \"hidden\");\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.salir();\r\n            window.location.href = 'http://172.20.0.84:7001/intranet#/';\r\n        }\r\n    }\r\n    sidebar() {\r\n        //   $('#menu-toggle').on('click', function() {\r\n        //     $('#wrapper').toggleClass('toggled');\r\n        // });\r\n        // console.log('siii')\r\n        if (this.sidebarShow) {\r\n            jQuery('.largeTable').width('96vw');\r\n            this.sidebarShow = false;\r\n        }\r\n        else {\r\n            jQuery('.largeTable').width('80vw');\r\n            this.sidebarShow = true;\r\n        }\r\n    }\r\n    salir() {\r\n        this.authService.logout();\r\n        //window.location.href = 'https://app.eeasa.com.ec/intranet#/';\r\n        window.location.href = 'http://172.20.0.84:7001/intranet#/';\r\n    }\r\n};\r\nMenuComponent = __decorate([\r\n    Component({\r\n        selector: 'app-menu',\r\n        templateUrl: './menu.component.html',\r\n        styleUrls: ['./menu.component.css']\r\n    })\r\n], MenuComponent);\r\nexport { MenuComponent };\r\n"]},"metadata":{},"sourceType":"module"}