{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jesda/Desktop/sisgerhapp/sisgerhapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as CryptoJS from 'crypto-js';\nimport { Subject } from 'rxjs';\nimport Swal from 'sweetalert2';\nimport { PdfMakeWrapper, Img, Table, Ul } from 'pdfmake-wrapper'; //import * as pdfFonts from \"pdfmake/build/vfs_fonts\";\n\nimport * as pdfFonts from \"pdfmake/build/vfs_fonts\";\nimport { Txt, Columns } from 'pdfmake-wrapper';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"src/app/services/sisgerh-movil.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"angular-datatables\";\nPdfMakeWrapper.setFonts(pdfFonts);\nexport class ConsolidadoComponent {\n  constructor(datePipe, sisgerhService, router, route) {\n    this.datePipe = datePipe;\n    this.sisgerhService = sisgerhService;\n    this.router = router;\n    this.route = route;\n    this.dtOptions = {};\n    this.dtTrigger = new Subject();\n    this.page = 0;\n  }\n\n  ngOnInit() {\n    $(\"#btnImprimir\").hide();\n    this.dtOptions = {\n      pagingType: 'full_numbers',\n      pageLength: 4,\n      info: true,\n      processing: true,\n      ordering: true,\n      order: [],\n      language: {\n        \"url\": \"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json\"\n      },\n      responsive: true,\n      retrieve: true,\n      \"columnDefs\": [{\n        \"targets\": [0],\n        \"orderable\": false\n      }]\n    };\n    this.fecha = new Date();\n\n    fecha: '';\n\n    this.actual = this.datePipe.transform(this.fecha, \"yyyy-MM-dd\");\n    let tmpFecha = new Date();\n    this.inDesde = this.datePipe.transform(tmpFecha.getFullYear() + \"-\" + (tmpFecha.getMonth() + 1) + \"-\" + 1, 'yyyy-MM-dd');\n  }\n\n  obtenerConsolidado() {\n    let Desde = $(\"#fechaInicio\").val();\n    let Hasta = $(\"#fechaFin\").val();\n    this.inDesde = this.datePipe.transform(Desde, \"yyyy-MM-dd\");\n    this.inHasta = this.datePipe.transform(Hasta, \"yyyy-MM-dd\");\n\n    if (this.inHasta > this.actual) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Fecha final no puede ser mayor a la actual'\n      });\n    } else if (this.inDesde > this.inHasta) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Fecha de inicio no puede ser mayor a la fecha fin'\n      });\n    } else if (this.inDesde == null || this.inHasta == null) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Debe ingresar una fecha'\n      });\n    } else {\n      this.inDesde = this.datePipe.transform(Desde, \"dd/MM/yyyy\");\n      this.inHasta = this.datePipe.transform(Hasta, \"dd/MM/yyyy\"); //\n\n      this.inPer = localStorage.getItem('codPer');\n      this.inPer = CryptoJS.AES.decrypt(this.inPer.toString(), 'eeasaPer').toString(CryptoJS.enc.Utf8);\n      this.consolidado = [''];\n      this.sisgerhService.obtenerConsolidado(this.inPer, this.inDesde, this.inHasta).subscribe(res => {\n        let dtInstance = $('#tblConsolidado').DataTable();\n        dtInstance.destroy();\n        this.consolidado = res;\n\n        if (this.consolidado.length != 0) {\n          $(\"#btnImprimir\").show();\n        }\n\n        this.dtTrigger.next();\n      });\n    }\n\n    let tmpFecha = new Date();\n    this.inDesde = this.datePipe.transform(tmpFecha.getFullYear() + \"-\" + (tmpFecha.getMonth() + 1) + \"-\" + 1, 'yyyy-MM-dd');\n  }\n\n  reporteAsistencia() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.consolidado.length == 0) {\n        Swal.fire({\n          icon: 'info',\n          title: 'Información',\n          text: 'No existen datos para impresión'\n        });\n      } else {\n        const pdf = new PdfMakeWrapper();\n        pdf.info({\n          title: 'Asistencia',\n          author: 'EEASA'\n        });\n        pdf.pageSize('A4');\n        pdf.pageOrientation('portrait');\n        pdf.defaultStyle({\n          bold: false,\n          fontSize: 9\n        });\n        pdf.pageMargins([60, 200, 60, 60]);\n        pdf.header(new Ul(['  ', '  ', new Columns([yield new Img('assets/Images/logoReporte.png').build(), {\n          width: 'auto',\n          text: new Txt('EMPRESA ELÉCTRICA AMBATO REGIONAL CENTRO NORTE S.A                                                                                                  Departamento de Relaciones Industriales                                                                                                  Recursos Humanos').alignment('center').fontSize(12).bold().end,\n          margin: [-20, 15, 0, 0]\n        }]).end, new Columns([{\n          width: 'auto',\n          text: new Txt('DETALLE DE ASISTENCIA DE PERSONAL').alignment('center').fontSize(12).bold().end,\n          margin: [200, 10, 0, 0]\n        }]).end, new Columns([{\n          width: 'auto',\n          text: new Txt('CÓDIGO:').alignment('center').fontSize(11).bold().end,\n          margin: [30, 10, 0, 0]\n        }, {\n          width: 'auto',\n          text: new Txt(_this.consolidado[0].ROL).alignment('center').fontSize(10).end,\n          margin: [18, 10, 0, 0]\n        }]).end, new Columns([{\n          width: 'auto',\n          text: new Txt('NOMBRE:').alignment('center').fontSize(11).bold().end,\n          margin: [30, 2, 0, 0]\n        }, {\n          width: 'auto',\n          text: new Txt(_this.consolidado[0].NOMBRE).alignment('center').fontSize(10).end,\n          margin: [12, 2, 0, 0]\n        }]).end, new Columns([{\n          width: 'auto',\n          text: new Txt('DESDE:').alignment('center').fontSize(11).bold().end,\n          margin: [30, 2, 0, 0]\n        }, {\n          width: 'auto',\n          text: new Txt(_this.inDesde).alignment('center').fontSize(10).end,\n          margin: [22, 2, 0, 0]\n        }]).end, new Columns([{\n          width: 'auto',\n          text: new Txt('HASTA:').alignment('center').fontSize(11).bold().end,\n          margin: [30, 2, 0, 0]\n        }, {\n          width: 'auto',\n          text: new Txt(_this.inHasta).alignment('center').fontSize(10).end,\n          margin: [21, 2, 0, 0]\n        }]).end]).type('none').end);\n        let tablaAsistencia = [];\n        tablaAsistencia.push([new Txt('Nº').bold().fontSize(8).end, new Txt('FECHA').bold().fontSize(8).alignment('center').end, new Txt('ABREV.').bold().fontSize(8).alignment('center').end, new Txt('TRANSACCIONES REALIZADAS').alignment('center').bold().fontSize(8).end, new Txt('DESCRIPCIÓN').alignment('center').bold().fontSize(8).end]);\n\n        for (let index = 0; index < _this.consolidado.length; index++) {\n          let row = [];\n          row.push(index + 1);\n          row.push(_this.consolidado[index].FECHA_ASI);\n          row.push(_this.consolidado[index].ABREVIATURA);\n          row.push(_this.consolidado[index].PICADAS);\n          row.push(_this.consolidado[index].DESCRIPCION);\n          tablaAsistencia.push(row);\n        }\n\n        tablaAsistencia.push(['', '', '', '', '']);\n        pdf.add(new Table(tablaAsistencia).margin([-20, 0, 0, 0]).headerRows(1).fontSize(8).layout('lightHorizontalLines').widths([20, 60, 25, 175, 200]).end);\n        pdf.add(pdf.ln(1)); //pdf.create().open();\n\n        pdf.create().download('asistencia');\n      }\n    })();\n  }\n\n}\n\nConsolidadoComponent.ɵfac = function ConsolidadoComponent_Factory(t) {\n  return new (t || ConsolidadoComponent)(i0.ɵɵdirectiveInject(i1.DatePipe), i0.ɵɵdirectiveInject(i2.SisgerhMovilService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\n\nConsolidadoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ConsolidadoComponent,\n  selectors: [[\"app-consolidado\"]],\n  decls: 54,\n  vars: 9,\n  consts: [[2, \"height\", \"100%\", \"width\", \"100%\", \"background-color\", \"#F4F5F6\"], [2, \"height\", \"10px\"], [2, \"text-align\", \"center\", \"color\", \"#192A67\", \"font-size\", \"28px\"], [\"id\", \"cardEncabezado\", 1, \"card\", \"text-center\"], [1, \"card-header\", 2, \"background-color\", \"#EAEBEF\"], [1, \"row\", \"mb-3\"], [1, \"col-sm-4\"], [1, \"row\"], [1, \"col-sm-4\", \"col-form-label\", \"lblLeft\"], [1, \"col-sm-8\"], [\"type\", \"date\", \"id\", \"fechaInicio\", \"title\", \"Fecha inicio\", 1, \"form-control\", 3, \"value\", \"max\"], [\"type\", \"date\", \"id\", \"fechaFin\", \"title\", \"Fecha fin\", 1, \"form-control\", 3, \"ngModel\", \"max\"], [1, \"col-sm-6\"], [\"type\", \"button\", \"id\", \"btnConsultar\", \"title\", \"Consultar\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"bi\", \"bi-search\"], [1, \"card-body\"], [\"id\", \"divTable\", 1, \"table-responsive\"], [\"datatable\", \"\", \"id\", \"tblAutorizacion\", 1, \"table\", \"table-hover\", 3, \"dtTrigger\", \"dtOptions\"], [2, \"background-color\", \"#192A67\"], [2, \"height\", \"50px\"]],\n  template: function ConsolidadoComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"p\", 2);\n      i0.ɵɵtext(3, \"Asistencia \");\n      i0.ɵɵelementStart(4, \"strong\");\n      i0.ɵɵtext(5, \"consolidada\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 3);\n      i0.ɵɵelementStart(7, \"div\", 4);\n      i0.ɵɵelementStart(8, \"div\", 5);\n      i0.ɵɵelementStart(9, \"div\", 6);\n      i0.ɵɵelementStart(10, \"div\", 7);\n      i0.ɵɵelementStart(11, \"label\", 8);\n      i0.ɵɵtext(12, \"Fecha Inicio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 9);\n      i0.ɵɵelement(14, \"input\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 6);\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵelementStart(17, \"label\", 8);\n      i0.ɵɵtext(18, \"Fecha Fin\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 9);\n      i0.ɵɵelement(20, \"input\", 11);\n      i0.ɵɵpipe(21, \"date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 6);\n      i0.ɵɵelementStart(23, \"div\", 7);\n      i0.ɵɵelementStart(24, \"div\", 12);\n      i0.ɵɵelementStart(25, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function ConsolidadoComponent_Template_button_click_25_listener() {\n        return ctx.obtenerConsolidado();\n      });\n      i0.ɵɵelement(26, \"i\", 14);\n      i0.ɵɵtext(27, \" Consultar \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 15);\n      i0.ɵɵelementStart(29, \"div\", 16);\n      i0.ɵɵelementStart(30, \"table\", 17);\n      i0.ɵɵelementStart(31, \"thead\");\n      i0.ɵɵelementStart(32, \"tr\", 18);\n      i0.ɵɵelementStart(33, \"th\");\n      i0.ɵɵtext(34, \"N\\u00FAmero\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"th\");\n      i0.ɵɵtext(36, \"Estado\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"th\");\n      i0.ɵɵtext(38, \"Jefe comisi\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"th\");\n      i0.ɵɵtext(40, \"Fecha creaci\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"th\");\n      i0.ɵɵtext(42, \"Fecha apertura\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"th\");\n      i0.ɵɵtext(44, \"Fecha inicio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"th\");\n      i0.ɵɵtext(46, \"Fecha fin\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"th\");\n      i0.ɵɵtext(48, \"Num. d\\u00EDas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"th\");\n      i0.ɵɵtext(50, \"Destino\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(51, \"th\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(52, \"tbody\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(53, \"div\", 19);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.inDesde);\n      i0.ɵɵproperty(\"max\", ctx.actual);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", i0.ɵɵpipeBind2(21, 6, ctx.fecha, \"yyyy-MM-dd\"))(\"max\", ctx.actual);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"dtTrigger\", ctx.dtTrigger)(\"dtOptions\", ctx.dtOptions);\n    }\n  },\n  directives: [i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.DataTableDirective],\n  pipes: [i1.DatePipe],\n  styles: [\"\"]\n});","map":{"version":3,"sources":["C:/Users/jesda/Desktop/sisgerhapp/sisgerhapp/src/app/components/asistencia/consolidado/consolidado.component.ts"],"names":["CryptoJS","Subject","Swal","PdfMakeWrapper","Img","Table","Ul","pdfFonts","Txt","Columns","i0","i1","i2","i3","i4","i5","setFonts","ConsolidadoComponent","constructor","datePipe","sisgerhService","router","route","dtOptions","dtTrigger","page","ngOnInit","$","hide","pagingType","pageLength","info","processing","ordering","order","language","responsive","retrieve","fecha","Date","actual","transform","tmpFecha","inDesde","getFullYear","getMonth","obtenerConsolidado","Desde","val","Hasta","inHasta","fire","icon","title","text","inPer","localStorage","getItem","AES","decrypt","toString","enc","Utf8","consolidado","subscribe","res","dtInstance","DataTable","destroy","length","show","next","reporteAsistencia","pdf","author","pageSize","pageOrientation","defaultStyle","bold","fontSize","pageMargins","header","build","width","alignment","end","margin","ROL","NOMBRE","type","tablaAsistencia","push","index","row","FECHA_ASI","ABREVIATURA","PICADAS","DESCRIPCION","add","headerRows","layout","widths","ln","create","download","ɵfac","ConsolidadoComponent_Factory","t","ɵɵdirectiveInject","DatePipe","SisgerhMovilService","Router","ActivatedRoute","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","ConsolidadoComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵpipe","ɵɵlistener","ConsolidadoComponent_Template_button_click_25_listener","ɵɵadvance","ɵɵpropertyInterpolate","ɵɵproperty","ɵɵpipeBind2","directives","DefaultValueAccessor","NgControlStatus","NgModel","DataTableDirective","pipes","styles"],"mappings":"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","sourcesContent":["import * as CryptoJS from 'crypto-js';\r\nimport { Subject } from 'rxjs';\r\nimport Swal from 'sweetalert2';\r\nimport { PdfMakeWrapper, Img, Table, Ul } from 'pdfmake-wrapper';\r\n//import * as pdfFonts from \"pdfmake/build/vfs_fonts\";\r\nimport * as pdfFonts from \"pdfmake/build/vfs_fonts\";\r\nimport { Txt, Columns } from 'pdfmake-wrapper';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common\";\r\nimport * as i2 from \"src/app/services/sisgerh-movil.service\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"@angular/forms\";\r\nimport * as i5 from \"angular-datatables\";\r\nPdfMakeWrapper.setFonts(pdfFonts);\r\nexport class ConsolidadoComponent {\r\n    constructor(datePipe, sisgerhService, router, route) {\r\n        this.datePipe = datePipe;\r\n        this.sisgerhService = sisgerhService;\r\n        this.router = router;\r\n        this.route = route;\r\n        this.dtOptions = {};\r\n        this.dtTrigger = new Subject();\r\n        this.page = 0;\r\n    }\r\n    ngOnInit() {\r\n        $(\"#btnImprimir\").hide();\r\n        this.dtOptions = {\r\n            pagingType: 'full_numbers',\r\n            pageLength: 4,\r\n            info: true,\r\n            processing: true,\r\n            ordering: true,\r\n            order: [],\r\n            language: {\r\n                \"url\": \"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json\"\r\n            },\r\n            responsive: true,\r\n            retrieve: true,\r\n            \"columnDefs\": [\r\n                {\r\n                    \"targets\": [0],\r\n                    \"orderable\": false\r\n                }\r\n            ]\r\n        };\r\n        this.fecha = new Date();\r\n        fecha: '';\r\n        this.actual = this.datePipe.transform(this.fecha, \"yyyy-MM-dd\");\r\n        let tmpFecha = new Date();\r\n        this.inDesde = this.datePipe.transform((tmpFecha.getFullYear() + \"-\" + (tmpFecha.getMonth() + 1) + \"-\" + 1), 'yyyy-MM-dd');\r\n    }\r\n    obtenerConsolidado() {\r\n        let Desde = $(\"#fechaInicio\").val();\r\n        let Hasta = $(\"#fechaFin\").val();\r\n        this.inDesde = this.datePipe.transform(Desde, \"yyyy-MM-dd\");\r\n        this.inHasta = this.datePipe.transform(Hasta, \"yyyy-MM-dd\");\r\n        if (this.inHasta > this.actual) {\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error',\r\n                text: 'Fecha final no puede ser mayor a la actual'\r\n            });\r\n        }\r\n        else if (this.inDesde > this.inHasta) {\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error',\r\n                text: 'Fecha de inicio no puede ser mayor a la fecha fin'\r\n            });\r\n        }\r\n        else if (this.inDesde == null || this.inHasta == null) {\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error',\r\n                text: 'Debe ingresar una fecha'\r\n            });\r\n        }\r\n        else {\r\n            this.inDesde = this.datePipe.transform(Desde, \"dd/MM/yyyy\");\r\n            this.inHasta = this.datePipe.transform(Hasta, \"dd/MM/yyyy\"); //\r\n            this.inPer = localStorage.getItem('codPer');\r\n            this.inPer = CryptoJS.AES.decrypt(this.inPer.toString(), 'eeasaPer').toString(CryptoJS.enc.Utf8);\r\n            this.consolidado = [''];\r\n            this.sisgerhService.obtenerConsolidado(this.inPer, this.inDesde, this.inHasta).subscribe(res => {\r\n                let dtInstance = $('#tblConsolidado').DataTable();\r\n                dtInstance.destroy();\r\n                this.consolidado = res;\r\n                if (this.consolidado.length != 0) {\r\n                    $(\"#btnImprimir\").show();\r\n                }\r\n                this.dtTrigger.next();\r\n            });\r\n        }\r\n        let tmpFecha = new Date();\r\n        this.inDesde = this.datePipe.transform((tmpFecha.getFullYear() + \"-\" + (tmpFecha.getMonth() + 1) + \"-\" + 1), 'yyyy-MM-dd');\r\n    }\r\n    async reporteAsistencia() {\r\n        if (this.consolidado.length == 0) {\r\n            Swal.fire({\r\n                icon: 'info',\r\n                title: 'Información',\r\n                text: 'No existen datos para impresión'\r\n            });\r\n        }\r\n        else {\r\n            const pdf = new PdfMakeWrapper();\r\n            pdf.info({\r\n                title: 'Asistencia',\r\n                author: 'EEASA'\r\n            });\r\n            pdf.pageSize('A4');\r\n            pdf.pageOrientation('portrait');\r\n            pdf.defaultStyle({\r\n                bold: false,\r\n                fontSize: 9\r\n            });\r\n            pdf.pageMargins([60, 200, 60, 60]);\r\n            pdf.header(new Ul([\r\n                '  ',\r\n                '  ',\r\n                new Columns([await new Img('assets/Images/logoReporte.png').build(),\r\n                    { width: 'auto', text: new Txt('EMPRESA ELÉCTRICA AMBATO REGIONAL CENTRO NORTE S.A                                                                                                  Departamento de Relaciones Industriales                                                                                                  Recursos Humanos').alignment('center').fontSize(12).bold().end, margin: [-20, 15, 0, 0] }\r\n                ]).end,\r\n                new Columns([\r\n                    { width: 'auto', text: new Txt('DETALLE DE ASISTENCIA DE PERSONAL').alignment('center').fontSize(12).bold().end, margin: [200, 10, 0, 0] }\r\n                ]).end,\r\n                new Columns([\r\n                    { width: 'auto', text: new Txt('CÓDIGO:').alignment('center').fontSize(11).bold().end, margin: [30, 10, 0, 0] }, { width: 'auto', text: new Txt(this.consolidado[0].ROL).alignment('center').fontSize(10).end, margin: [18, 10, 0, 0] }\r\n                ]).end,\r\n                new Columns([\r\n                    { width: 'auto', text: new Txt('NOMBRE:').alignment('center').fontSize(11).bold().end, margin: [30, 2, 0, 0] }, { width: 'auto', text: new Txt(this.consolidado[0].NOMBRE).alignment('center').fontSize(10).end, margin: [12, 2, 0, 0] }\r\n                ]).end,\r\n                new Columns([\r\n                    { width: 'auto', text: new Txt('DESDE:').alignment('center').fontSize(11).bold().end, margin: [30, 2, 0, 0] }, { width: 'auto', text: new Txt(this.inDesde).alignment('center').fontSize(10).end, margin: [22, 2, 0, 0] }\r\n                ]).end,\r\n                new Columns([\r\n                    { width: 'auto', text: new Txt('HASTA:').alignment('center').fontSize(11).bold().end, margin: [30, 2, 0, 0] }, { width: 'auto', text: new Txt(this.inHasta).alignment('center').fontSize(10).end, margin: [21, 2, 0, 0] }\r\n                ]).end\r\n            ]).type('none').end);\r\n            let tablaAsistencia = [];\r\n            tablaAsistencia.push([\r\n                new Txt('Nº').bold().fontSize(8).end,\r\n                new Txt('FECHA').bold().fontSize(8).alignment('center').end,\r\n                new Txt('ABREV.').bold().fontSize(8).alignment('center').end,\r\n                new Txt('TRANSACCIONES REALIZADAS').alignment('center').bold().fontSize(8).end,\r\n                new Txt('DESCRIPCIÓN').alignment('center').bold().fontSize(8).end\r\n            ]);\r\n            for (let index = 0; index < this.consolidado.length; index++) {\r\n                let row = [];\r\n                row.push(index + 1);\r\n                row.push(this.consolidado[index].FECHA_ASI);\r\n                row.push(this.consolidado[index].ABREVIATURA);\r\n                row.push(this.consolidado[index].PICADAS);\r\n                row.push(this.consolidado[index].DESCRIPCION);\r\n                tablaAsistencia.push(row);\r\n            }\r\n            tablaAsistencia.push(['', '', '', '', '']);\r\n            pdf.add(new Table(tablaAsistencia).margin([-20, 0, 0, 0]).headerRows(1).fontSize(8).layout('lightHorizontalLines').widths([20, 60, 25, 175, 200]).end);\r\n            pdf.add(pdf.ln(1));\r\n            //pdf.create().open();\r\n            pdf.create().download('asistencia');\r\n        }\r\n    }\r\n}\r\nConsolidadoComponent.ɵfac = function ConsolidadoComponent_Factory(t) { return new (t || ConsolidadoComponent)(i0.ɵɵdirectiveInject(i1.DatePipe), i0.ɵɵdirectiveInject(i2.SisgerhMovilService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute)); };\r\nConsolidadoComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ConsolidadoComponent, selectors: [[\"app-consolidado\"]], decls: 54, vars: 9, consts: [[2, \"height\", \"100%\", \"width\", \"100%\", \"background-color\", \"#F4F5F6\"], [2, \"height\", \"10px\"], [2, \"text-align\", \"center\", \"color\", \"#192A67\", \"font-size\", \"28px\"], [\"id\", \"cardEncabezado\", 1, \"card\", \"text-center\"], [1, \"card-header\", 2, \"background-color\", \"#EAEBEF\"], [1, \"row\", \"mb-3\"], [1, \"col-sm-4\"], [1, \"row\"], [1, \"col-sm-4\", \"col-form-label\", \"lblLeft\"], [1, \"col-sm-8\"], [\"type\", \"date\", \"id\", \"fechaInicio\", \"title\", \"Fecha inicio\", 1, \"form-control\", 3, \"value\", \"max\"], [\"type\", \"date\", \"id\", \"fechaFin\", \"title\", \"Fecha fin\", 1, \"form-control\", 3, \"ngModel\", \"max\"], [1, \"col-sm-6\"], [\"type\", \"button\", \"id\", \"btnConsultar\", \"title\", \"Consultar\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"bi\", \"bi-search\"], [1, \"card-body\"], [\"id\", \"divTable\", 1, \"table-responsive\"], [\"datatable\", \"\", \"id\", \"tblAutorizacion\", 1, \"table\", \"table-hover\", 3, \"dtTrigger\", \"dtOptions\"], [2, \"background-color\", \"#192A67\"], [2, \"height\", \"50px\"]], template: function ConsolidadoComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelement(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"p\", 2);\r\n        i0.ɵɵtext(3, \"Asistencia \");\r\n        i0.ɵɵelementStart(4, \"strong\");\r\n        i0.ɵɵtext(5, \"consolidada\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(6, \"div\", 3);\r\n        i0.ɵɵelementStart(7, \"div\", 4);\r\n        i0.ɵɵelementStart(8, \"div\", 5);\r\n        i0.ɵɵelementStart(9, \"div\", 6);\r\n        i0.ɵɵelementStart(10, \"div\", 7);\r\n        i0.ɵɵelementStart(11, \"label\", 8);\r\n        i0.ɵɵtext(12, \"Fecha Inicio\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"div\", 9);\r\n        i0.ɵɵelement(14, \"input\", 10);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(15, \"div\", 6);\r\n        i0.ɵɵelementStart(16, \"div\", 7);\r\n        i0.ɵɵelementStart(17, \"label\", 8);\r\n        i0.ɵɵtext(18, \"Fecha Fin\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(19, \"div\", 9);\r\n        i0.ɵɵelement(20, \"input\", 11);\r\n        i0.ɵɵpipe(21, \"date\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(22, \"div\", 6);\r\n        i0.ɵɵelementStart(23, \"div\", 7);\r\n        i0.ɵɵelementStart(24, \"div\", 12);\r\n        i0.ɵɵelementStart(25, \"button\", 13);\r\n        i0.ɵɵlistener(\"click\", function ConsolidadoComponent_Template_button_click_25_listener() { return ctx.obtenerConsolidado(); });\r\n        i0.ɵɵelement(26, \"i\", 14);\r\n        i0.ɵɵtext(27, \" Consultar \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(28, \"div\", 15);\r\n        i0.ɵɵelementStart(29, \"div\", 16);\r\n        i0.ɵɵelementStart(30, \"table\", 17);\r\n        i0.ɵɵelementStart(31, \"thead\");\r\n        i0.ɵɵelementStart(32, \"tr\", 18);\r\n        i0.ɵɵelementStart(33, \"th\");\r\n        i0.ɵɵtext(34, \"N\\u00FAmero\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(35, \"th\");\r\n        i0.ɵɵtext(36, \"Estado\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(37, \"th\");\r\n        i0.ɵɵtext(38, \"Jefe comisi\\u00F3n\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(39, \"th\");\r\n        i0.ɵɵtext(40, \"Fecha creaci\\u00F3n\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(41, \"th\");\r\n        i0.ɵɵtext(42, \"Fecha apertura\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(43, \"th\");\r\n        i0.ɵɵtext(44, \"Fecha inicio\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(45, \"th\");\r\n        i0.ɵɵtext(46, \"Fecha fin\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(47, \"th\");\r\n        i0.ɵɵtext(48, \"Num. d\\u00EDas\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(49, \"th\");\r\n        i0.ɵɵtext(50, \"Destino\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(51, \"th\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(52, \"tbody\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(53, \"div\", 19);\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(14);\r\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.inDesde);\r\n        i0.ɵɵproperty(\"max\", ctx.actual);\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵproperty(\"ngModel\", i0.ɵɵpipeBind2(21, 6, ctx.fecha, \"yyyy-MM-dd\"))(\"max\", ctx.actual);\r\n        i0.ɵɵadvance(10);\r\n        i0.ɵɵproperty(\"dtTrigger\", ctx.dtTrigger)(\"dtOptions\", ctx.dtOptions);\r\n    } }, directives: [i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.DataTableDirective], pipes: [i1.DatePipe], styles: [\"\"] });\r\n"]},"metadata":{},"sourceType":"module"}